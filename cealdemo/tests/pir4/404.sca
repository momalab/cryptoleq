
# PIR example

.pragma k=5 beta=8

.pragma r=5137 PQ=107.101

#.pragma r=37046 PQ=239.251
#.pragma r=1983007781 PQ=63199.64567
#.pragma r=15200057817349533296 PQ=4281167959.4271299633
#.pragma r=158206486220048275739729787098738889401 PQ=18299379327617480707.18345258783657292909
#.pragma r=90523390910655846104436337982581059096250992545150563095924581229011186913827 PQ=338871469111127928412308213206819656391.338531414912581056934822037249894061881
#.pragma r=2064839145307395276722374251702735694727666969136491453643322306519460397612995533452766019544211639681662816439474348291281960595296477145070299431102221 PQ=115689526107095890311249333520175779978137070980169508677335528535095435701957.115509443392406915656501893779637949187966713758992043305916442498716409678501
#.pragma r=54182930015948495761710286554963652289614657396692619984943755329337069340636260894512450646524340269631965613629985201456982968601126206913685612991425673811633182611610164887817529776441650772234851020110910401165790973765597426607478870379389746412720378997937745226495677177591995749919422065298782808824 PQ=13392849694255970315601419090152597688339809774933571293865724091737666496951381207429127235940384883608845778583380210687006370486238723021460371010217257.13403952390292880134486926689236901739298695038033079040680862117777593853851234125818128702776151240584166261477766002390185782669746209391687589482784501


.pragma io=ts incdir=../lib/

10:
.mov    szero   sum
.add    szero   sum
.add    szero   sum
.add    szero   sum
.add    szero   sum

start:
.mov21  p key
.inc    p
.mov21  p val
.inc    p
.dec    db_size
.dec    db_size

.ceq    key input x
.cmul   x val y
.add    y sum

.out    sum #

.ifneq  db_size ozero start

#.out    sum
.outd   sum #

.halt

. sum:0 key:0 val:0 p:db_start x:0 y:0

# data
db_start:
.include datax "db.sec"
db_end:

input:;.include datax "input.sec"

db_size: (db_end - db_start)

# constants
. ozero:0 szero:~0

.include "confy.lib"
.include "s_mp1.lib"

.table $peekrnd 0
